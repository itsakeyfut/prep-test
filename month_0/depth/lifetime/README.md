# Rust の借用の寿命 (Lifetime) の本質

Lifetime とは超ざっくり言うと、
「この参照はどれくらい生きるか」をコンパイル時に保証する仕組み。

→ constexpr みたいな感じ？

Rust の基本ルール：

- 借用（参照）は、元のデータが生きている間だけ有効。
- 借用が有効な間は、元のデータを破壊/解放できない。
- これをコンパイラが静的にチェックする。

▶️ ライフタイムパラメータの記法

```rs
fn foo<'a>(x: &'a i32, y: &'a i32) -> &'a i32 { ... }
```

- 'a は「x と y と戻り値は全部同じ寿命」という意味
- "x も y も生きてる間だけ、戻り値も安全だよ"を示す。

🔵 Rust 流 Lifetime の美学まとめ

| 美学                                                                           | 理由                                   |
| ------------------------------------------------------------------------------ | -------------------------------------- |
| 1. "何が依存しているか"を明示する                                              | 借用ミスを防ぐ                         |
| 2. 出力の Lifetime は入力に依存させる                                          | 独立した Lifetime を持つのは非常に危険 |
| 3. 最小限の Lifetime を書く                                                    | コンパイラが推論できるなら省略して OK  |
| 4. 高度なパターン（例えば複数 Lifetime や Higher Rank Trait Bounds）も押さえる | 高度な API 設計に必須                  |
