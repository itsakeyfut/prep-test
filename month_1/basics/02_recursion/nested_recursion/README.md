# Nested Recursionï¼ˆå…¥ã‚Œå­å†å¸°ï¼‰

## âœ… æ¦‚è¦

å†å¸°å‘¼ã³å‡ºã—ã®å¼•æ•°ãŒã•ã‚‰ã«å†å¸°é–¢æ•°ã‚’å‘¼ã‚“ã§ã„ã‚‹ã¨ã„ã†ã€å†å¸°ã®ä¸­ã«å†å¸°ãŒã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚
ã„ã‚ã°ã€Œå†å¸°ã®ãƒã‚¹ãƒˆã€ã§ã™ã€‚

## ğŸ“˜ ä¾‹ï¼šãƒãƒƒã‚«ãƒ¼ã‚·ãƒ¼ 91 é–¢æ•°ï¼ˆMcCarthy 91 functionï¼‰

ã“ã‚Œã¯æœ€ã‚‚æœ‰åãªå…¥ã‚Œå­å†å¸°ã®ä¾‹ã§ã™ã€‚

```rs
fn mc91(n: i32) -> i32 {
    if n > 100 {
        n - 10
    } else {
        mc91(mc91(n + 11))
    }
}

fn main() {
    for i in 90..=110 {
        println!("mc91({}) = {}", i, mc91(i));
    }
}
```

## ğŸ§  çµæœ

```
mc91(90) = 91
mc91(91) = 91
mc91(92) = 91
mc91(93) = 91
mc91(94) = 91
mc91(95) = 91
mc91(96) = 91
mc91(97) = 91
mc91(98) = 91
mc91(99) = 91
mc91(100) = 91
mc91(101) = 91
mc91(102) = 92
mc91(103) = 93
mc91(104) = 94
mc91(105) = 95
mc91(106) = 96
mc91(107) = 97
mc91(108) = 98
mc91(109) = 99
mc91(110) = 100
```

## ğŸ¤” è§£èª¬

- `mc91(n)` ã¯ `n > 100` ã®ã¨ãã ã‘ç›´ã¡ã«å€¤ã‚’è¿”ã™ã€‚
- ãã‚Œä»¥å¤–ã¯ `mc91(mc91(n + 11))` ã¨ã„ã†å…¥ã‚Œå­å†å¸°ã€‚
- çµæœã¨ã—ã¦ã€`n <= 100` ã®ã¨ãã¯ã™ã¹ã¦ `91` ã«ãªã‚‹ã¨ã„ã†æ€§è³ªã‚’æŒã¤ã€‚

## ğŸ§  è¨­è¨ˆè¦–ç‚¹

- é€šå¸¸ã®å†å¸°ã‚ˆã‚Šå†å¸°æ·±åº¦ãŒæ·±ããªã‚Šã‚„ã™ãã€è¿½è·¡ãŒé›£ã—ã„ã€‚
- ãƒ¡ãƒ¢åŒ–ï¼ˆãƒ¡ãƒ¢ãƒªã‚’ä½¿ã£ã¦é€”ä¸­çµæœã‚’ä¿å­˜ï¼‰ã‚„ DP ã§ã¯æ‰±ã„ã«ãã„ã€‚
- å®Ÿç”¨ã§ã¯ã‚ã¾ã‚Šç™»å ´ã—ãªã„ãŒã€è¨€èªè¨­è¨ˆãƒ»ç†è«–è¨ˆç®—æ©Ÿç§‘å­¦ã®é¡Œæã¨ã—ã¦é‡è¦ã€‚

## ğŸ§ª æ¼”ç¿’ï¼ˆã‚„ã‚„é›£ï¼‰

å…¥ã‚Œå­å†å¸°ã‚’æ¨¡å€£ã—ãŸå¼ã®è©•ä¾¡å™¨ã‚’ä½œã‚‹ã®ã‚‚ä¸€ã¤ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã§ã™ã€‚

### ğŸ”§ æ¼”ç¿’ â‘ ï¼šãƒãƒƒã‚«ãƒ¼ã‚·ãƒ¼ 91 ã®ä»•çµ„ã¿ã‚’å¯è¦–åŒ–ã›ã‚ˆï¼ˆå†å¸°ã®æ·±ã•ã¨æˆ»ã‚Šå€¤ï¼‰

```rs
fn mc91(n: i32, depth: usize) -> i32 {
    println!("{:indent$}mc91({})", "", n, indent = depth * 2);
    if n > 100 {
        println!("{:indent$}mc91({})", "", n - 10, indent = depth * 2);
        n - 10
    } else {
        let result = mc91(mc91(n + 11, depth + 1), depth + 1);
        println!("{:indent$}mc91({})", "", n, indent = depth * 2);
        result
    }
}

fn main() {
    println!("Result: {}", mc91(87, 0));
}
```

```
mc91(87)
  mc91(98)
    mc91(109)
    mc91(99)
    mc91(99)
      mc91(110)
      mc91(100)
      mc91(100)
        mc91(111)
        mc91(101)
        mc91(101)
        mc91(91)
      mc91(100)
    mc91(99)
  mc91(98)
  mc91(91)
    mc91(102)
    mc91(92)
    mc91(92)
      mc91(103)
      mc91(93)
      mc91(93)
        mc91(104)
        mc91(94)
        mc91(94)
          mc91(105)
          mc91(95)
          mc91(95)
            mc91(106)
            mc91(96)
            mc91(96)
              mc91(107)
              mc91(97)
              mc91(97)
                mc91(108)
                mc91(98)
                mc91(98)
                  mc91(109)
                  mc91(99)
                  mc91(99)
                    mc91(110)
                    mc91(100)
                    mc91(100)
                      mc91(111)
                      mc91(101)
                      mc91(101)
                      mc91(91)
                    mc91(100)
                  mc91(99)
                mc91(98)
              mc91(97)
            mc91(96)
          mc91(95)
        mc91(94)
      mc91(93)
    mc91(92)
  mc91(91)
mc91(87)
Result: 91
```

### âœ… ç›®çš„ï¼š

- å…¥ã‚Œå­å†å¸°ã§ã©ã†å†å¸°ãŒãƒã‚¹ãƒˆã•ã‚Œã¦ã„ãã‹ã‚’ãƒ­ã‚°ã§ç¢ºèª

### ğŸ”§ æ¼”ç¿’ â‘¡ï¼šmc91 é–¢æ•°ã®å‡ºåŠ›ã‚’å…¨ç¯„å›²ã§ç¢ºèªã›ã‚ˆ

```rs
fn mc91(n: i32) -> i32 {
    if n > 100 {
        n - 10
    } else {
        mc91(mc91(n + 11))
    }
}

fn main() {
    for i in 80..=120 {
        println!("mc91({}) = {}", i, mc91(i));
    }
}
```

```
mc91(80) = 91
mc91(81) = 91
mc91(82) = 91
mc91(83) = 91
mc91(84) = 91
mc91(85) = 91
mc91(86) = 91
mc91(87) = 91
mc91(88) = 91
mc91(89) = 91
mc91(90) = 91
mc91(91) = 91
mc91(92) = 91
mc91(93) = 91
mc91(94) = 91
mc91(95) = 91
mc91(96) = 91
mc91(97) = 91
mc91(98) = 91
mc91(99) = 91
mc91(100) = 91
mc91(101) = 91
mc91(102) = 92
mc91(103) = 93
mc91(104) = 94
mc91(105) = 95
mc91(106) = 96
mc91(107) = 97
mc91(108) = 98
mc91(109) = 99
mc91(110) = 100
mc91(111) = 101
mc91(112) = 102
mc91(113) = 103
mc91(114) = 104
mc91(115) = 105
mc91(116) = 106
mc91(117) = 107
mc91(118) = 108
mc91(119) = 109
mc91(120) = 110
```

### âœ… ç›®çš„ï¼š

- `n <= 100` ãªã‚‰ã°çµæœãŒ `91` ã«ãªã‚‹ã¨ã„ã†æ€§è³ªã®æ¤œè¨¼ã€‚

### ğŸ”§ æ¼”ç¿’ â‘¢ï¼šãƒãƒƒã‚«ãƒ¼ã‚·ãƒ¼ 91 ã‚’ Rust ã§ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£åŒ–ã—ã¦ã¿ã‚‹ï¼ˆé«˜éšé–¢æ•°ï¼‰

```rs
fn main() {
    let mc91 = |mut f: &dyn Fn(i32) -> i32, n: i32| -> i32 {
        if n > 100 {
            n - 10
        } else {
            f(f(n + 11))
        }
    };

    // å†å¸°çš„ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã«ã¯ trick ãŒå¿…è¦ï¼ˆYã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚¿ or é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ï¼‰
    fn wrapper(n: i32) -> i32 {
        fn inner(n: i32) -> i32 {
            if n > 100 {
                n - 10
            } else {
                inner(inner(n + 11))
            }
        }
        inner(n)
    }

    for i in 85..=100 {
        println!("wrapper({}) = {}", i, wrapper(i));
    }
}
```

```
wrapper(85) = 91
wrapper(86) = 91
wrapper(87) = 91
wrapper(88) = 91
wrapper(89) = 91
wrapper(90) = 91
wrapper(91) = 91
wrapper(92) = 91
wrapper(93) = 91
wrapper(94) = 91
wrapper(95) = 91
wrapper(96) = 91
wrapper(97) = 91
wrapper(98) = 91
wrapper(99) = 91
wrapper(100) = 91
```
